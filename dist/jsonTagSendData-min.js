function jsonTagSendData(e,t,n,r,i,o){let s={};s=o?function e(t){if(Array.isArray(t))return t.map(e).filter((e=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e))));if("object"==typeof t&&null!==t)return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,e(n)])).filter((([,e])=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e)))));if("number"==typeof t&&Number.isNaN(t))return;return t}(t):t;const a=/AppleWebKit/i.test(navigator.userAgent)&&!/Chrome|CriOS|OPR|Edg|Edge|FxiOS|SamsungBrowser|Android/i.test(navigator.userAgent);let c={"Content-Type":"application/json"};function u(e,t){if(t){const n=t.dataLayerName,r=t.dataLayerEventName;window[n]=window[n]||[];const i={event:r},o={};if(e.device_id&&(o.device_id=e.device_id),e.session_id&&(o.session_id=e.session_id),e.tags&&(o.tags=e.tags),Object.keys(o).length>0&&(i.jsonclient=o),Object.keys(i).length>1)return i._clear=!0,window[n].push(i),!0}return!1}"function"!=typeof navigator.sendBeacon&&(i="fetch"),"sendBeacon"===i?navigator.sendBeacon(e,JSON.stringify(s)):!a&&n&&"function"==typeof CompressionStream?(Object.assign(c,{"Content-Encoding":"gzip"}),async function(){const t=new Blob([JSON.stringify(s)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),n=await new Response(t),i=await n.blob();await fetch(e,{method:"POST",credentials:"include",headers:c,body:i}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(u(e,r),e))).catch((e=>{}))}()):fetch(e,{method:"POST",credentials:"include",headers:c,body:JSON.stringify(s)}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(u(e,r),e))).catch((e=>{}))}