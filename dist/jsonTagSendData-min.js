function jsonTagSendData(e,t,n,i,o,r,a,s){function c(e){return Array.isArray(e)?e.map(c).filter((e=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e)))):"object"==typeof e&&null!==e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,c(t)])).filter((([,e])=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e))))):"number"==typeof e&&Number.isNaN(e)?void 0:e}function d(e,t){if(t){const n=t.dataLayerName,i=t.dataLayerEventName;window[n]=window[n]||[];const o={event:i},r={};if(e.device_id&&(r.device_id=e.device_id),e.session_id&&(r.session_id=e.session_id),e.tags&&(r.tags=e.tags),Object.keys(r).length>0&&(o.jsonclient=r),Object.keys(o).length>1)return o._clear=!0,window[n].push(o),!0}return!1}return(async()=>{let l=r?c(t):t;var u;l=a?((u=l).page_location=window.location.href,u.page_path=window.location.pathname,u.page_hostname=window.location.hostname,u.page_referrer=document.referrer,u.page_title=document.title,u.page_encoding=document.characterSet,u.screen_resolution=window.screen&&window.screen.width+"x"+window.screen.height,u.viewport_size=window.innerWidth&&window.innerHeight&&window.innerWidth+"x"+window.innerHeight,u.language=navigator&&navigator.language,u):l;const w=/AppleWebKit/i.test(navigator.userAgent)&&!/Chrome|OPR|Edge|SamsungBrowser|Android/i.test(navigator.userAgent),p="keepalive"in new Request(""),g="undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon;let f={"Content-Type":"application/json"};s&&(f["X-Gtm-Server-Preview"]=s);let h=o;if("sendBeacon"===o||"fetchKeepalive"===o)if(p)h="fetchKeepalive";else{if(g)return navigator.sendBeacon(e,JSON.stringify(l)),!0;h="fetch"}if(!w&&"fetch"===h&&n&&"function"==typeof CompressionStream)try{f["Content-Encoding"]="gzip";const t=new Blob([JSON.stringify(l)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),n=new Response(t),o=await n.blob(),r=await fetch(e,{method:"POST",credentials:"include",headers:f,body:o});if(!r.ok)throw new Error("HTTP-Error! Status: "+r.status);const a=await r.json();d(a,i)}catch(e){return null}else try{let t={method:"POST",credentials:"include",body:JSON.stringify(l)};"fetchKeepalive"===h&&(t.keepalive=!0,f["X-Keepalive-Request"]=1),t.headers=f;const n=await fetch(e,t);if(!n.ok)throw new Error("HTTP-Error! Status: "+n.status);const o=await n.json();d(o,i)}catch(e){return null}})(),!0}