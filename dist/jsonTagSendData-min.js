!function(e){e.jsonTagSendData=function(t,n,r,a,o,i,s,c){function l(e){return Array.isArray(e)?e.map(l).filter((e=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e)))):"object"==typeof e&&null!==e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,l(t)])).filter((([,e])=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e))))):"number"==typeof e&&Number.isNaN(e)?void 0:e}function u(t,n){if(!n)return!1;const{dataLayerName:r,dataLayerEventName:a}=n;e[r]=e[r]||[];const o={event:a,_clear:!0};return t&&Object.keys(t).length>0&&(o.jsonclient=t),e[r].push(o),!0}return(async()=>{let p=i?l(n):n;var f;p=s?((f=p).page_location=e.location.href,f.page_path=e.location.pathname,f.page_hostname=e.location.hostname,f.page_referrer=document.referrer,f.page_title=document.title,f.page_encoding=document.characterSet,f.screen_resolution=e.screen&&e.screen.width+"x"+e.screen.height,f.viewport_size=e.innerWidth&&e.innerHeight&&e.innerWidth+"x"+e.innerHeight,f.language=navigator&&navigator.language,f):p;const g=/AppleWebKit/i.test(navigator.userAgent)&&!/Chrome|OPR|Edge|SamsungBrowser|Android/i.test(navigator.userAgent),h="keepalive"in new Request(""),d="undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon;let m={"Content-Type":"application/json"};c&&(m["X-Gtm-Server-Preview"]=c);let y=o||"fetch";if("sendBeacon"===o){if(d)return navigator.sendBeacon(t,JSON.stringify(p)),!0;y=h?"fetchKeepalive":"fetch"}if(!g&&"fetch"===y&&r&&"function"==typeof CompressionStream)try{m["Content-Encoding"]="gzip";const e=new Blob([JSON.stringify(p)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),n=new Response(e),r=await n.blob(),o=await fetch(t,{method:"POST",credentials:"include",headers:m,body:r});if(!o.ok)throw new Error("HTTP-Error! Status: "+o.status);const i=await o.json();u(i,a)}catch(e){return null}else try{let e={method:"POST",credentials:"include",body:JSON.stringify(p)};"fetchKeepalive"===y&&(e.keepalive=!0,m["X-Keepalive-Request"]=1),e.headers=m;const n=await fetch(t,e);if(!n.ok)throw new Error("HTTP-Error! Status: "+n.status);const r=await n.json();u(r,a)}catch(e){return null}})(),!0}}(window);