function jsonTagSendData(e,t,n,i,o,r,a,s){function c(e){return Array.isArray(e)?e.map(c).filter((e=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e)))):"object"==typeof e&&null!==e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,c(t)])).filter((([,e])=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length||"number"==typeof e&&Number.isNaN(e))))):"number"==typeof e&&Number.isNaN(e)?void 0:e}function l(e,t){if(!t)return!1;const{dataLayerName:n,dataLayerEventName:i}=t;window[n]=window[n]||[];const o={event:i,_clear:!0};return e&&Object.keys(e).length>0&&(o.jsonclient=e),window[n].push(o),!0}return(async()=>{let d=r?c(t):t;var u;d=a?((u=d).page_location=window.location.href,u.page_path=window.location.pathname,u.page_hostname=window.location.hostname,u.page_referrer=document.referrer,u.page_title=document.title,u.page_encoding=document.characterSet,u.screen_resolution=window.screen&&window.screen.width+"x"+window.screen.height,u.viewport_size=window.innerWidth&&window.innerHeight&&window.innerWidth+"x"+window.innerHeight,u.language=navigator&&navigator.language,u):d;const w=/AppleWebKit/i.test(navigator.userAgent)&&!/Chrome|OPR|Edge|SamsungBrowser|Android/i.test(navigator.userAgent),p="keepalive"in new Request(""),f="undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon;let g={"Content-Type":"application/json"};s&&(g["X-Gtm-Server-Preview"]=s);let h=o;if("sendBeacon"===o||"fetchKeepalive"===o)if(p)h="fetchKeepalive";else{if(f)return navigator.sendBeacon(e,JSON.stringify(d)),!0;h="fetch"}if(!w&&"fetch"===h&&n&&"function"==typeof CompressionStream)try{g["Content-Encoding"]="gzip";const t=new Blob([JSON.stringify(d)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),n=new Response(t),o=await n.blob(),r=await fetch(e,{method:"POST",credentials:"include",headers:g,body:o});if(!r.ok)throw new Error("HTTP-Error! Status: "+r.status);const a=await r.json();l(a,i)}catch(e){return null}else try{let t={method:"POST",credentials:"include",body:JSON.stringify(d)};"fetchKeepalive"===h&&(t.keepalive=!0,g["X-Keepalive-Request"]=1),t.headers=g;const n=await fetch(e,t);if(!n.ok)throw new Error("HTTP-Error! Status: "+n.status);const o=await n.json();l(o,i)}catch(e){return null}})(),!0}